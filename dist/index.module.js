import{Controller as e}from"@hotwired/stimulus";import"@kanety/stimulus-static-actions";class t extends e{get input(){return this.scope.findElement("input[type=file]")}connect(){this.counter=0}enter(e){this.counter++,this.toggleClass(e.dataTransfer,!0),e.preventDefault()}leave(e){this.counter--,0==this.counter&&this.toggleClass(e.dataTransfer,!1),e.preventDefault()}drop(e){if(this.counter=0,this.toggleClass(e.dataTransfer,!1),this.droppable(e.dataTransfer)){var t=this.input;t&&(t.files=e.dataTransfer.files,t.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),t.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))),this.dispatch("dropped",{detail:{files:e.dataTransfer.files}})}e.preventDefault()}toggleClass(e,t){this.element.classList.toggle("st-dropzone--dragover",t),this.droppable(e)||this.element.classList.toggle("st-dropzone--disable-drop",t)}overDoc(e){this.dragging=!0,this.dragin(),e.preventDefault()}leaveDoc(e){this.dragging=!1,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.dragging||this.dragout()},200),e.preventDefault()}dropDoc(e){this.dragging=!1,this.dragout(),e.preventDefault()}dragin(){this.element.classList.add("st-dropzone--dragin"),this.growWidthValue&&(this.element.style.minWidth=this.growWidthValue),this.growHeightValue&&(this.element.style.minHeight=this.growHeightValue)}dragout(){this.element.classList.remove("st-dropzone--dragin"),this.growWidthValue&&(this.element.style.minWidth=""),this.growHeightValue&&(this.element.style.minHeight="")}droppable(e){var t=this.input;return!t||t.hasAttribute("multiple")||1==e.items.length}}t.values={growWidth:String,growHeight:String},t.actions=[["element","dragenter->enter"],["element","dragleave->leave"],["element","drop->drop"],["element","dragover@document->overDoc"],["element","dragleave@document->leaveDoc"],["element","drop@document->dropDoc"]];export{t as default};
//# sourceMappingURL=index.module.js.map
